// Generated by CoffeeScript 2.1.1
(function() {
  // view controller
  var load;

  load = function(destination = 'home', scope = '') {
    var endpoint, header, url;
    endpoint = window.endpoint.bare;
    switch (destination) {
      case 'home':
        url = "";
        break;
      case 'servers':
        url = "servers";
        break;
      case 'servers[detailed]':
        url = `servers/${scope}`;
        break;
      default:
        return;
    }
    header = {
      'X-CSRFTOKEN': window.csrftoken
    };
    return window.endpoint.bare[url].post(header, {}, function(dummy, response) {
      var data, status;
      status = response.status;
      data = response.data;
      if (status === 200) {
        $(".main")[0].innerHTML = data;
        $(".main script.execute").forEach(function(scr) {
          return eval(scr.innerHTML);
        });
        url = !url ? '/' : url;
        return window.history.pushState("", "", url);
      }
    });
  };

  window.vc = load;

}).call(this);
