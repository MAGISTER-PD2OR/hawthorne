// Generated by CoffeeScript 2.1.1
(function() {
  var search;

  search = function(query, that = null) {
    $({
      'query': query
    }).ajax('/api/v1/steam/search', 'GET', function(data, status) {
      var ele, formatted, i, len;
      data = JSON.parse(data);
      data = data['result'];
      if (that !== null) {
        formatted = [];
        for (i = 0, len = data.length; i < len; i++) {
          ele = data[i];
          formatted.push({
            'value': ele.url,
            'label': `<img class='inner-dropdown-image' src='${ele.image}' />${ele.name}`
          });
        }
        that.setChoices(formatted, 'value', 'label', true);
      }
      return data;
    });
  };

  window.steam = {
    search: search
  };

}).call(this);
