// Generated by CoffeeScript 2.1.1
(function() {
  var init, menu;

  $(function() {
    return init();
  });

  init = function(scope = document) {
    var announcement_expand, checkmark_toggle, clipboard, composer_select_choose, composer_select_open, ct_switch, dropdown_toggle, modal_close, modal_open, overlay, search_input, search_overlay, selectionData, server_item, system_messages_open, user_toggle;
    dropdown_toggle = function(event) {
      event.stopImmediatePropagation();
      $('.expand').not($('.expand', this.parentElement)).slideUp();
      $('.menu > ul > li > a').not($(this)).removeClass('navActive');
      $(this).toggleClass('navActive');
      $('.expand', this.parentElement).slideToggle();
    };
    $('[data-trigger=\'[dropdown/toggle]\']', scope).on('click', dropdown_toggle);
    modal_open = function() {
      $('.overlay').fadeIn('fast');
      $('[data-component=\'' + this.getAttribute('data-trigger-target') + '\']').fadeIn('fast');
    };
    $('[data-trigger=\'[modal/open]\']', scope).on('click', modal_open);
    server_item = function() {
      $(this).toggleClass('toggableListActive');
      $(this).find('.content').fadeToggle('fast');
    };
    $('[data-trigger=\'[server/item]\']', scope).on('click', server_item);
    modal_close = function() {
      var parent;
      $('.overlay').fadeOut('fast');
      parent = this.parentElement;
      while (!$(parent).hasClass('modal')) {
        parent = parent.parentElement;
      }
      $(parent).fadeOut('fast');
    };
    $('[data-trigger=\'[modal/close]\']', scope).on('click', modal_close);
    overlay = function() {
      $('.overlay').fadeOut('fast');
      $('.modal').fadeOut('fast');
    };
    $('.overlay', scope).on('click', overlay);
    system_messages_open = function() {
      $('.notificationsArea', this).fadeToggle('fast');
      $($('a', this)[0]).toggleClass('userMenuActive');
    };
    $('[data-trigger=\'[system/messages/open]\']', scope).on('click', system_messages_open);
    search_overlay = function() {
      $('.searchOverlay').fadeOut('fast');
      $('.searchArea').fadeOut('fast');
      $('.search').animate({
        width: '20%'
      }, 250);
    };
    $('.searchOverlay', scope).on('click', search_overlay);
    announcement_expand = function() {
      $(this).find('.announcement-expand').slideToggle();
    };
    $('[data-trigger=\'[announcement/expand]\']', scope).on('click', announcement_expand);
    user_toggle = function() {
      $(this).find('.dropdown').fadeToggle('fast');
    };
    $('[data-trigger=\'[user/toggle]\']', scope).on('click', user_toggle);
    search_input = function() {
      $('.modal').fadeOut('fast');
      $('.searchOverlay').fadeIn('fast');
      $('.searchArea').fadeToggle('fast');
      $('.search').animate({
        width: '30%'
      }, 250);
    };
    $('.search input', scope).on('click', search_input);
    checkmark_toggle = function() {
      $(this.parentElement.parentElement).toggleClass('logSelected');
      $('.checkboxDialogue').not($('.checkboxDialogue', this.parentElement)).fadeOut('fast');
      if (!$('input', this)[0].checked) {
        $('.checkboxDialogue', this.parentElement).fadeIn('fast');
      } else {
        $('.checkboxDialogue', this.parentElement).fadeOut('fast');
      }
    };
    $('.timeTable tbody tr td .checkmarkContainer', scope).on('mousedown', checkmark_toggle);
    // retired
    $('[data-trigger=\'[modal/system/log/import/input/add]\']', scope).on('click', function() {
      $(this).parent().find('.appendInput').append('<input type=\'text\' placeholder=\'/home/server/addons/sourcemod/logs/error.log\' class=\'mbotSmall\'>');
    });
    composer_select_open = function() {
      $(this).parent('._Dynamic_Select').toggleClass('_Dynamic_Select_Activated');
      $(this).parent('._Dynamic_Select').find('._Select').toggle();
      $(this).parent('._Dynamic_Select').find('._Select').find('._Select_Search').find('input').focus();
    };
    $('[data-trigger=\'[composer/select/open]\']', scope).on('click', composer_select_open);
    selectionData = [];
    composer_select_choose = function() {
      var checkBox, i, text;
      if ($(this).parent().closest('._Dynamic_Select').find('._Title').attr('data-select-multiple') === 'true') {
        text = $(this).find('p').text();
        checkBox = $(this).find('.checkmarkContainer input');
        if (!checkBox.is(':checked')) {
          checkBox.prop('checked', true);
          selectionData.push(text);
        } else {
          checkBox.prop('checked', false);
          i = 0;
          while (i < selectionData.length) {
            if (selectionData[i] === text) {
              selectionData.splice(i, 1);
              break;
            }
            i += 1;
          }
        }
        $(this).closest('._Dynamic_Select').find('._Title').text('(' + selectionData.length + ') selections');
        return;
      }
      $(this).closest('._Dynamic_Select').find('._Title').text($(this).find('b').text());
      $(this).closest('._Dynamic_Select').toggleClass('_Dynamic_Select_Activated');
      $(this).closest('._Select').hide();
    };
    $('[data-trigger=\'[composer/select/choose]\']', scope).on('click', composer_select_choose);
    ct_switch = function() {
      var hash;
      $('.paginationTabSelected', this.parentElement).removeClass('paginationTabSelected');
      hash = this.getAttribute('data');
      $(this).addClass('paginationTabSelected');
      history.replaceState({
        'location': window._.location,
        'scope': window._.scope
      }, null, `#${hash}`);
      window.lazy(this.parentElement.getAttribute('data-target'), '');
    };
    $('[data-trigger=\'[ct/switch]\']', scope).on('click', ct_switch);
    clipboard = function(event) {
      return window.style.copy(this.getAttribute('data-clipboard-text'));
    };
    $('[data-trigger="[clip/copy]"]', scope).on('click', clipboard);
  };

  menu = function() {
    $('.paginationTabs').forEach(function(i) {
      var e, j, len, ref, results;
      ref = i.children;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        e = ref[j];
        if (window.location.hash && window.location.hash.substring(1) === e.getAttribute('data')) {
          results.push($(e).addClass('paginationTabSelected'));
        } else {
          results.push(void 0);
        }
      }
      return results;
    });
  };

  window._ = {
    init: init,
    menu: menu
  };

}).call(this);
