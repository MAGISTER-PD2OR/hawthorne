var l=l||{};l.scope={};l.ASSUME_ES5=!1;l.ASSUME_NO_NATIVE_MAP=!1;l.ASSUME_NO_NATIVE_SET=!1;l.defineProperty=l.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,c){d!=Array.prototype&&d!=Object.prototype&&(d[a]=c.value)};l.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};l.global=l.getGlobal(this);
l.polyfill=function(d,a){if(a){var c=l.global;d=d.split(".");for(var b=0;b<d.length-1;b++){var m=d[b];m in c||(c[m]={});c=c[m]}d=d[d.length-1];b=c[d];a=a(b);a!=b&&null!=a&&l.defineProperty(c,d,{configurable:!0,writable:!0,value:a})}};
l.polyfill("Array.from",function(d){return d?d:function(a,c,b){c=null!=c?c:function(a){return a};var d=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var e=0;!(f=a.next()).done;)d.push(c.call(b,f.value,e++))}else for(f=a.length,e=0;e<f;e++)d.push(c.call(b,a[e],e));return d}},"es6","es3");l.polyfill("Object.is",function(d){return d?d:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
l.polyfill("Array.prototype.includes",function(d){return d?d:function(a,c){var b=this;b instanceof String&&(b=String(b));var d=b.length;c=c||0;for(0>c&&(c=Math.max(c+d,0));c<d;c++){var f=b[c];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
l.checkStringArgs=function(d,a,c){if(null==d)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return d+""};l.polyfill("String.prototype.includes",function(d){return d?d:function(a,c){return-1!==l.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
(function(){var d=function(a,c){var b={};switch(void 0===a?"":a){case "punishment":var d=c.getAttribute("data-id");a=c.getAttribute("data-user");var f=window.endpoint.api.users[a].punishments[d];break;case "admins[server][admins]":d=c.getAttribute("data-id");a=c.getAttribute("data-user");f=window.endpoint.api.users[a];b={roles:[d],reset:!1};break;case "admins[server][roles]":d=c.getAttribute("data-id");f=window.endpoint.api.roles[d];break;case "admins[web][admins]":a=c.getAttribute("data-id");a=c.getAttribute("data-user");
f=window.endpoint.api.users[a];b={reset:!0};break;case "admins[web][groups]":a=c.getAttribute("data-id");f=window.endpoint.api.groups[a];break;case "servers[detailed]":d=c.getAttribute("data-id"),f=window.endpoint.api.servers[d]}return f.delete({},{},b,function(a,b){b.success&&(c.hasAttribute("data-opacity")&&(d=c.getAttribute("data-id"),a=$("[data-id='"+d+"']").css("opacity","0.5").removeClass("logSelected"),$(".checkboxDialogue",a).fadeOut("fast"),$(".checkmarkContainer",a).css("visibility","hidden")),
c.hasAttribute("data-remove")&&$(c).remove(),c.hasAttribute("data-visibility")&&$(c).css("visibility","hidden"),c.hasAttribute("data-redirect")&&window.vc())})};window.api.remove=function(a,c,b){a=void 0===a?"":a;(void 0===b?0:b)?(c=window.batch,window.batch=[]):c=[c];c.forEach(function(b){return d(a,b)})}}).call(this);
(function(){var d=function(a,c){a=void 0===a?"":a;var b,d;var f={target:c,skip_animation:!1};var e=c.parentElement.parentElement.parentElement;switch(a){case "admin__administrator":f=$("input.role",e)[0].value;a=$("input.uuid",e)[0].value;var h=window.api.storage[a+"#"+f];e=h.getValue(!0);h=[b={promotion:!1,role:f},b={promotion:!0,role:e}];e=d=0;for(f=h.length;e<f;e++)b=h[e],window.endpoint.api.users[a].post(b,function(a,b){if(b.success)return d+=1});var k=$(c);2===d?k.addClass("explicit red"):k.addClass("explicit green");
setTimeout(function(){return k.removeClass("explicit green red")},1200);break;case "admin__groups":a=$("input.uuid",e)[0].value;var g={name:$(".name span",e).html(),server:window.api.storage[a].getValue(!0),immunity:parseInt($(".immunity span",e).html().match(/([0-9]|[1-8][0-9]|9[0-9]|100)(?:%)?$/)[1]),usetime:-1,flags:""};$(".immunity span",e).html(g.immunity+"%");"all"===g.server&&(g.server=null);$(".actions input:checked",e).forEach(function(a){return g.flags+=a.value});c=$(".usetime span",e).html();
if(!0===c||""!==c)g.usetime=window.style.duration.parse(c);window.endpoint.api.roles[a].post(f,{},g,function(){});break;case "mutegag":case "ban":var q=$("input.user",e)[0].value;var p=$("input.server",e)[0].value;var r=$("input.punishment",e)[0].value;h=parseInt($(".icon.time",e)[0].getAttribute("data-created"));c=$(".icon.time input",e)[0].value;""!==c?(c=new Date(c),c=c.getTime()/1E3):c=0;b={length:parseInt(c-h),reason:$(".icon.reason span",e).html()};""!==p&&(b.server=p);"ban"===a&&(b.banned=
!0);"mutegag"===a&&($(".icon.modes .red",e).forEach(function(a){return b.type+=a.getAttribute("data-type")}),b.muted=!1,b.gagged=!1,b.type.match(/mute/)&&b.type.match(/gag/)&&(b.muted=!0,b.gagged=!0),""===b.type&&(b.muted=!0,b.gagged=!0),type.match(/mute/)&&(b.muted=!0),type.match(/gag/)&&(b.gagged=!0));window.endpoint.api.users[q].punishments[r].post(f,{},b,function(){});break;case "server":e=e.parentElement;a=$("input.uuid",e)[0].value;h=window.api.storage[a];b={game:h.getValue(!0),gamemode:$(".icon.gamemode span",
e).html(),ip:$(".icon.network span",e).html().split(":")[0],port:parseInt($(".icon.network span",e).html().split(":")[1])};e=$(".icon.password input",e)[0].value;""!==e&&(b.password=e);window.endpoint.api.servers[a].post(f,{},b,function(){});break;case "setting__user":a=$("input.uuid",e)[0].value;h=window.api.storage[a];var n=[];$(".permission__child:checked",e).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)});b={permissions:n,groups:h.getValue(!0)};
window.endpoint.api.users[a].post(f,{},b,function(){});break;case "setting__group":a=$("input.uuid",e)[0].value,n=[],$(".permission__child:checked",e).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)}),b={permissions:n},window.endpoint.api.groups[a].post(f,{},b,function(){})}};window.api.edit=function(a,c){a=void 0===a?"":a;if(c.getAttribute("class").match(/save/))d(a,c);else{var b=c.parentElement.parentElement.parentElement;var m=c.getAttribute("onclick");
switch(a){case "admin__administrator":var f=b.querySelector(".icon.group");a=$("input.uuid",b)[0].value;var e=$("input.role",b)[0].value;var h=f.querySelector("span");$(h).remove();$(f).htmlAppend("<select id='group-"+(a+"---"+e)+"'></select>");var k=new Choices("#group-"+(a+"---"+e),{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit"}});k.passedElement.addEventListener("change",function(){h=$(".server span",b);var a=k.getValue().customProperties.server;return null===a?h.html("all"):
window.endpoint.api.servers[a].get(function(a,b){if(b.success)return h.html(b.result.name)})},!1);window.api.storage[a+"#"+e]=k;window.api.roles("",k,e);break;case "admin__groups":f=b.querySelector(".icon.server");a=$("input.uuid",b)[0].value;e=$("input.server",b)[0].value;""===e&&(e="all");h=f.querySelector("span");$(h).remove();$(f).htmlAppend("<select id='server-"+a+"'></select>");k=new Choices("#server-"+a,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit small"}});$(".icon.group .actions",
b).removeClass("disabled").addClass("enabled");$(".icon.usetime",b).addClass("input-wrapper");$(".icon.usetime span i",b).remove();$(".icon.usetime span",b).on("focusout",function(){var a=$(this);var b=a.html();var c=window.style.duration.parse(b);if(""!==b&&0===c)return a.css("border-bottom-color","#FF404B");a.css("border-bottom-color","");return a.html(window.style.duration.string(c))});$(".icon.immunity",b).addClass("input-wrapper");$(".icon.name",b).addClass("input-wrapper");$(".icon span",b).addClass("input");
$(".icon span",b).forEach(function(a){return a.setAttribute("contenteditable","true")});window.api.storage[a]=k;window.api.servers("",k,e);break;case "ban":case "mutegag":$(".icon.reason",b).addClass("input-wrapper");$(".icon.reason span",b).addClass("input");$(".icon.reason span",b)[0].setAttribute("contenteditable","true");$(".icon.time",b).addClass("input-wrapper");a=1E3*parseInt($(".icon.time span",b)[0].getAttribute("data-timestamp"));a=new Date(a);a=window.style.utils.date.convert.to.iso(a);
e=window.style.utils.date.convert.to.iso(new Date);$(".icon.time",b).htmlAppend("<input type='datetime-local' min='"+e+"' value='"+a+"'>");$(".icon.time span",b).remove();$(".icon.modes div",b).addClass("action").forEach(function(a){return a.setAttribute("onclick","window.style.mutegag.toggle(this)")});$(".icon.modes div svg",b).forEach(function(a){a=$(a);a.hasClass("gray")&&a.removeClass("gray").addClass("red");if(a.hasClass("white"))return a.removeClass("white").addClass("gray")});break;case "server":b=
b.parentElement;a=$("input.uuid",b)[0].value;e=$(".icon.game",b);$("span",e[0]).remove();e.htmlAppend("<select id='server-"+a+"'></select>");k=new Choices("#server-"+a,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit big"}});window.api.games(k,e[0].getAttribute("data-value"));$(".icon.gamemode",b).addClass("input-wrapper big");$(".icon.gamemode span",b).addClass("input");$(".icon.gamemode span",b)[0].setAttribute("contenteditable","true");$(".icon.network",b).addClass("input-wrapper big");
$(".icon.network span",b).addClass("input");$(".icon.network span",b)[0].setAttribute("contenteditable","true");$(".icon.password",b).addClass("input-wrapper big");$(".icon.password",b).htmlAppend('<input type="password", placeholder="Password"></input>');$(".icon.password span",b).remove();window.api.storage[a]=k;break;case "setting__user":$(".column.animated",b).toggleClass("collapsed");a=$("input.uuid",b)[0].value;e=$(".column.groups",b);e.htmlAppend("<select id='user-group-"+a+"' multiple></select>");
k=new Choices("#user-group-"+a,{choices:[],duplicateItems:!1,paste:!1,searchEnabled:!1,searchChoices:!1,removeItemButton:!0,classNames:{containerOuter:"choices edit"}});window.api.groups("",k,$("span",e).html().split(", "));$("span",e).remove();window.style.settings.init(!0);window.api.storage[a]=k;break;case "setting__group":$(".column.animated",b).toggleClass("collapsed"),window.style.settings.init(!0)}$(c).css("opacity","0");setTimeout(function(){$(c).htmlAfter("<i class='save opacity animated' data-feather='save'></i>");
feather.replace();var a=c.parentElement.querySelector(".save.opacity.animated");$(c).remove();return setTimeout(function(){a.setAttribute("onclick",m);return $(a).css("opacity","1")},300)},300)}}}).call(this);
(function(){var d=function(a,b,d,f,e){return a[f](b,{},d,function(a,b){if(b.success)return e.reset()})};var a=function(a,b){a=void 0===a?"":a;var c={};var f={toast:!0};var e="put";var h=void 0;var k=!0;Array.from(b.elements).forEach(function(a){var b,d;if(!$(a).hasClass("skip")){var e=window.api.utils.transform(a);var g=window.api.utils.validation(a);if(g[0])if($(a).hasClass("target"))h=e;else{g=a.name;a.hasAttribute("data-name")&&(g=a.getAttribute("data-name"));if(a.hasAttribute("multiple"))return f=
Array.from(a.options),c[g]=f.map(function(a){return a.value});if(a.hasAttribute("data-boolean"))return c[a.getAttribute("data-boolean")]=a.checked;if("checkbox"===a.getAttribute("type")){if(!a.checked)return;c.hasOwnProperty(a.name)||(c[g]=[]);return c[g].push(e)}if(a.hasAttribute("data-list"))return c[g]=[e];if(g.includes("/")&&"Array"===e.constructor.name){a=[];var m=g.split("/");g=b=0;for(d=m.length;b<=d;g=b+=1)a.push([m[g],e[g]]);return a.forEach(function(a){return c[a[0]]=a[1]})}if(e)return c[g]=
e}else k=!1,$(a).addClass("invalid"),console.log(g),$("span span.invalid",$(a).parent())[0].innerHTML=g[1]}});if(k){switch(a){case "admins[web][groups]":var g=window.endpoint.api.groups;break;case "admins[web][admins]":e="post";g=window.endpoint.api.users[h];break;case "admins[server][roles]":g=window.endpoint.api.roles;break;case "admins[server][admins]":e="post";g=window.endpoint.api.users[h];break;case "players[detailed][punishment]":g=window.endpoint.api.users[h].punishments;break;case "servers":g=
window.endpoint.api.servers}b.hasAttribute("data-append")?g.get({},{},{},function(a,h){a=b.getAttribute("data-append");c[a]=h.result[a].concat(c[a]);return d(g,f,c,e,b)}):d(g,f,c,e,b)}};window.api.create=function(c,b,d){c=void 0===c?"":c;(void 0===d?0:d)?(b=window.batch,window.batch=[]):b=[b];b.forEach(function(b){return a(c,b)})}}).call(this);
window.api.utils={validation:function(d){var a=!0;var c="";if(!d.value)return[a,c];if(d.hasAttribute("data-link")){var b=d.getAttribute("data-link");var m=$(d).parent("form");c="Only one field can be filled.";$("[data-link="+b+"]",m).not([d]).forEach(function(b){if(b.value)return a=!1})}a||window.style.toast("error","Invalid value detected!");return[a,c]},transform:function(d){if(!d.hasAttribute("data-transform"))return d.value;var a=d.getAttribute("data-transform");return"iso-duration"===a?(d=new Duration(d.value),
d.seconds):"ip-port"===a?d.value.split(":").splice(0,2):"flatpickr"===a?(a=$(d).parent(".flatpickr")[0]._flatpickr.selectedDates[0].getTime(),d=new Date/1E3>>0,(a/1E3>>0)-d):"lower"===a?d.value.toLowerCase():d.value}};
