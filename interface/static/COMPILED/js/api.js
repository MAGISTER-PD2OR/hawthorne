var f=f||{};f.scope={};f.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};f.arrayIterator=function(a){return{next:f.arrayIteratorImpl(a)}};f.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):f.arrayIterator(a)};f.ASSUME_ES5=!1;f.ASSUME_NO_NATIVE_MAP=!1;f.ASSUME_NO_NATIVE_SET=!1;
f.defineProperty=f.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};f.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};f.global=f.getGlobal(this);
f.polyfill=function(a,b){if(b){var c=f.global;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&f.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
f.polyfill("Array.from",function(a){return a?a:function(b,c,a){c=null!=c?c:function(b){return b};var e=[],d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof d){b=d.call(b);for(var h=0;!(d=b.next()).done;)e.push(c.call(a,d.value,h++))}else for(d=b.length,h=0;h<d;h++)e.push(c.call(a,b[h],h));return e}},"es6","es3");f.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
f.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var a=this;a instanceof String&&(a=String(a));var e=a.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var g=a[c];if(g===b||Object.is(g,b))return!0}return!1}},"es7","es3");
f.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};f.polyfill("String.prototype.includes",function(a){return a?a:function(b,a){return-1!==f.checkStringArgs(this,b,"includes").indexOf(b,a||0)}},"es6","es3");
(function(){var a=function(b,a){var c={};switch(void 0===b?"":b){case "punishment":var e=a.getAttribute("data-id");b=a.getAttribute("data-user");var g=window.endpoint.api.users[b].punishments[e];break;case "admins[server][admins]":e=a.getAttribute("data-id");b=a.getAttribute("data-user");g=window.endpoint.api.users[b];c={roles:[e],reset:!1};break;case "admins[server][roles]":e=a.getAttribute("data-id");g=window.endpoint.api.roles[e];break;case "admins[web][admins]":b=a.getAttribute("data-id");b=a.getAttribute("data-user");
g=window.endpoint.api.users[b];c={reset:!0};break;case "admins[web][groups]":b=a.getAttribute("data-id");g=window.endpoint.api.groups[b];break;case "servers[detailed]":e=a.getAttribute("data-id");g=window.endpoint.api.servers[e];break;case "system[token]":e=a.getAttribute("data-id"),g=window.endpoint.api.system.tokens[e]}return g.delete({},{},c,function(b,c){c.success&&(a.hasAttribute("data-opacity")&&(e=a.getAttribute("data-id"),b=$("[data-id='"+e+"']").css("opacity","0.5").removeClass("logSelected"),
$(".checkboxDialogue",b).fadeOut("fast"),$(".checkmarkContainer",b).css("visibility","hidden")),a.hasAttribute("data-remove")&&$(a).remove(),a.hasAttribute("data-visibility")&&$(a).css("visibility","hidden"),a.hasAttribute("data-redirect")&&window.vc())})};window.api.remove=function(b,c,d){b=void 0===b?"":b;(void 0===d?0:d)?(c=window.batch,window.batch=[]):c=[c];c.forEach(function(c){return a(b,c)})}}).call(this);
(function(){var a=function(a,c,d){a=void 0===a?"":a;var b=f.makeIterator(window.api.utils.normalize(c));c=b.next().value;var g=b.next().value;b=b.next().value;d&&(g=d);if(b){switch(a){case "admins[web][groups]":var h=window.endpoint.api.groups[g];break;case "admins[server][roles]":h=window.endpoint.api.roles[g];break;case "players[detailed][punishment]":d=f.makeIterator(g.split(":"));a=d.next().value;d=d.next().value;h=window.endpoint.api.users[a].punishments[d];break;case "servers":h=window.endpoint.api.servers[g]}h.post({toast:!0},
{},c,function(){})}};window.api.edit=function(b,c,d){b=void 0===b?"":b;(void 0===d?0:d)?window.batch.forEach(function(e){return a(b,c,e.getAttribute("data-overwrite"))}):a(b,c)}}).call(this);
(function(){var a=function(a,b,e,g,h){return a[g](b,{},e,function(a,b){if(b.success)return h.reset()})};var b=function(b,d){b=void 0===b?"":b;var c={toast:!0};var g="put";var h=f.makeIterator(window.api.utils.normalize(d));var l=h.next().value;var k=h.next().value;if(h.next().value){switch(b){case "admins[web][groups]":var m=window.endpoint.api.groups;break;case "admins[web][admins]":g="post";m=window.endpoint.api.users[k];break;case "admins[server][roles]":m=window.endpoint.api.roles;break;case "admins[server][admins]":g=
"post";m=window.endpoint.api.users[k];break;case "players[detailed][punishment]":m=window.endpoint.api.users[k].punishments;break;case "servers":m=window.endpoint.api.servers;break;case "system[token]":m=window.endpoint.api.system.tokens}d.hasAttribute("data-append")?m.get({},{},{},function(b,e){b=d.getAttribute("data-append");l[b]=e.result[b].concat(l[b]);return a(m,c,l,g,d)}):a(m,c,l,g,d)}};window.api.create=function(a,d,e){a=void 0===a?"":a;(void 0===e?0:e)?(d=window.batch,window.batch=[]):d=[d];
d.forEach(function(c){return b(a,c)})}}).call(this);
window.api.utils={validation:function(a){var b=!0;var c="";if(!a.value)return[b,c];if(a.hasAttribute("data-link")){var d=a.getAttribute("data-link");var e=$(a).parent("form");c="Only one field can be filled.";$("[data-link="+d+"]",e).not([a]).forEach(function(a){if(a.value)return b=!1})}b||window.style.toast("error","Invalid value detected!");return[b,c]},transform:function(a){if(!a.hasAttribute("data-transform"))return a.value;var b=a.getAttribute("data-transform");return"iso-duration"===b?(a=new Duration(a.value),
a.seconds):"ip-port"===b?a.value.split(":").splice(0,2):"flatpickr"===b?$(a).parent(".flatpickr")[0]._flatpickr.selectedDates[0]?(b=$(a).parent(".flatpickr")[0]._flatpickr.selectedDates[0].getTime(),a=new Date/1E3>>0,(b/1E3>>0)-a):null:"flatpickr-timestamp"===b?($(a).parent(".flatpickr")[0]._flatpickr.selectedDates[0]?(b=$(a).parent(".flatpickr")[0]._flatpickr.selectedDates[0].getTime(),b=b/1E3>>0):b=null,b):"lower"===b?a.value.toLowerCase():a.value},normalize:function(a){var b={};var c=!0;var d=
void 0;Array.from(a.elements).forEach(function(a){var e,h;if(!$(a).hasClass("skip")){var l=window.api.utils.transform(a);var k=window.api.utils.validation(a);if(k[0])if($(a).hasClass("target"))d=l;else{k=a.name;a.hasAttribute("data-name")&&(k=a.getAttribute("data-name"));if(a.hasAttribute("multiple"))return l=Array.from(a.options),b[k]=l.map(function(a){return a.value});if(a.hasAttribute("data-boolean"))return b[a.getAttribute("data-boolean")]=a.checked;if("checkbox"===a.getAttribute("type")){if(!a.checked)return;
b.hasOwnProperty(a.name)||(b[k]=[]);return b[k].push(l)}if(a.hasAttribute("data-list"))return b[k]=[l];if(k.includes("/")&&"Array"===l.constructor.name){a=[];var m=k.split("/");k=e=0;for(h=m.length;e<=h;k=e+=1)a.push([m[k],l[k]]);return a.forEach(function(a){return b[a[0]]=a[1]})}if(l)return b[k]=l}else c=!1,$(a).addClass("invalid"),$("span span.invalid",$(a).parent())[0].innerHTML=k[1]}});return[b,d,c]}};
