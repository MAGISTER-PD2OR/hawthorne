var k=k||{};k.scope={};k.ASSUME_ES5=!1;k.ASSUME_NO_NATIVE_MAP=!1;k.ASSUME_NO_NATIVE_SET=!1;k.defineProperty=k.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,b,c){f!=Array.prototype&&f!=Object.prototype&&(f[b]=c.value)};k.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};k.global=k.getGlobal(this);
k.polyfill=function(f,b){if(b){var c=k.global;f=f.split(".");for(var a=0;a<f.length-1;a++){var g=f[a];g in c||(c[g]={});c=c[g]}f=f[f.length-1];a=c[f];b=b(a);b!=a&&null!=b&&k.defineProperty(c,f,{configurable:!0,writable:!0,value:b})}};
k.polyfill("Array.from",function(f){return f?f:function(b,c,a){c=null!=c?c:function(a){return a};var g=[],e="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof e){b=e.call(b);for(var d=0;!(e=b.next()).done;)g.push(c.call(a,e.value,d++))}else for(e=b.length,d=0;d<e;d++)g.push(c.call(a,b[d],d));return g}},"es6","es3");
(function(){var f=function(b,c){var a={};switch(void 0===b?"":b){case "punishment":var g=c.getAttribute("data-id");var e=c.getAttribute("data-user");e=window.endpoint.api.users[e].punishments[g];break;case "admins[server][admins]":g=c.getAttribute("data-id");e=c.getAttribute("data-user");e=window.endpoint.api.users[e];a={roles:[g],reset:!1};break;case "admins[server][roles]":g=c.getAttribute("data-id");e=window.endpoint.api.roles[g];break;case "admins[web][admins]":b=c.getAttribute("data-id");e=c.getAttribute("data-user");
e=window.endpoint.api.users[e];a={groups:[b],reset:!1};break;case "admins[web][groups]":b=c.getAttribute("data-id");e=window.endpoint.api.groups[b];break;case "servers[detailed]":g=c.getAttribute("data-id"),e=window.endpoint.api.servers[g]}return e.delete({},{},a,function(a,b){b.success&&(c.hasAttribute("data-opacity")&&(g=c.getAttribute("data-id"),a=$("[data-id='"+g+"']").css("opacity","0.5").removeClass("logSelected"),$(".checkboxDialogue",a).fadeOut("fast"),$(".checkmarkContainer",a).css("visibility",
"hidden")),c.hasAttribute("data-remove")&&$(c).remove(),c.hasAttribute("data-visibility")&&$(c).css("visibility","hidden"),c.hasAttribute("data-redirect")&&window.vc())})};window.api.remove=function(b,c,a){b=void 0===b?"":b;(void 0===a?0:a)?(c=window.batch,window.batch=[]):c=[c];c.forEach(function(a){return f(b,a)})}}).call(this);
(function(){var f=function(b,c){b=void 0===b?"":b;var a,g;var e={target:c,skip_animation:!1};var d=c.parentElement.parentElement.parentElement;switch(b){case "admin__administrator":e=$("input.role",d)[0].value;b=$("input.uuid",d)[0].value;var f=window.api.storage[b+"#"+e];d=f.getValue(!0);f=[a={promotion:!1,role:e},a={promotion:!0,role:d}];d=g=0;for(e=f.length;d<e;d++)a=f[d],window.endpoint.api.users[b].post(a,function(a,b){if(b.success)return g+=1});var h=$(c);2===g?h.addClass("explicit red"):h.addClass("explicit green");
setTimeout(function(){return h.removeClass("explicit green red")},1200);break;case "admin__groups":b=$("input.uuid",d)[0].value;var m={name:$(".name span",d).html(),server:window.api.storage[b].getValue(!0),immunity:parseInt($(".immunity span",d).html().match(/([0-9]|[1-8][0-9]|9[0-9]|100)(?:%)?$/)[1]),usetime:-1,flags:""};$(".immunity span",d).html(m.immunity+"%");"all"===m.server&&(m.server=null);$(".actions input:checked",d).forEach(function(a){return m.flags+=a.value});c=$(".usetime span",d).html();
if(!0===c||""!==c)m.usetime=window.style.duration.parse(c);window.endpoint.api.roles[b].post(e,{},m,function(){});break;case "mutegag":case "ban":var q=$("input.user",d)[0].value;var p=$("input.server",d)[0].value;var r=$("input.punishment",d)[0].value;f=parseInt($(".icon.time",d)[0].getAttribute("data-created"));c=$(".icon.time input",d)[0].value;""!==c?(c=new Date(c),c=c.getTime()/1E3):c=0;a={length:parseInt(c-f),reason:$(".icon.reason span",d).html()};""!==p&&(a.server=p);"ban"===b&&(a.banned=
!0);"mutegag"===b&&($(".icon.modes .red",d).forEach(function(b){return a.type+=b.getAttribute("data-type")}),a.muted=!1,a.gagged=!1,a.type.match(/mute/)&&a.type.match(/gag/)&&(a.muted=!0,a.gagged=!0),""===a.type&&(a.muted=!0,a.gagged=!0),type.match(/mute/)&&(a.muted=!0),type.match(/gag/)&&(a.gagged=!0));window.endpoint.api.users[q].punishments[r].post(e,{},a,function(){});break;case "server":d=d.parentElement;b=$("input.uuid",d)[0].value;f=window.api.storage[b];a={game:f.getValue(!0),gamemode:$(".icon.gamemode span",
d).html(),ip:$(".icon.network span",d).html().split(":")[0],port:parseInt($(".icon.network span",d).html().split(":")[1])};d=$(".icon.password input",d)[0].value;""!==d&&(a.password=d);window.endpoint.api.servers[b].post(e,{},a,function(){});break;case "setting__user":b=$("input.uuid",d)[0].value;f=window.api.storage[b];var n=[];$(".permission__child:checked",d).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)});a={permissions:n,groups:f.getValue(!0)};
window.endpoint.api.users[b].post(e,{},a,function(){});break;case "setting__group":b=$("input.uuid",d)[0].value,n=[],$(".permission__child:checked",d).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)}),a={permissions:n},window.endpoint.api.groups[b].post(e,{},a,function(){})}};window.api.edit=function(b,c){b=void 0===b?"":b;if(c.getAttribute("class").match(/save/))f(b,c);else{var a=c.parentElement.parentElement.parentElement;var g=c.getAttribute("onclick");
switch(b){case "admin__administrator":var e=a.querySelector(".icon.group");b=$("input.uuid",a)[0].value;var d=$("input.role",a)[0].value;var l=e.querySelector("span");$(l).remove();$(e).htmlAppend("<select id='group-"+(b+"---"+d)+"'></select>");var h=new Choices("#group-"+(b+"---"+d),{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit"}});h.passedElement.addEventListener("change",function(){l=$(".server span",a);var b=h.getValue().customProperties.server;return null===b?l.html("all"):
window.endpoint.api.servers[b].get(function(a,b){if(b.success)return l.html(b.result.name)})},!1);window.api.storage[b+"#"+d]=h;window.api.roles("",h,d);break;case "admin__groups":e=a.querySelector(".icon.server");b=$("input.uuid",a)[0].value;d=$("input.server",a)[0].value;""===d&&(d="all");l=e.querySelector("span");$(l).remove();$(e).htmlAppend("<select id='server-"+b+"'></select>");h=new Choices("#server-"+b,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit small"}});$(".icon.group .actions",
a).removeClass("disabled").addClass("enabled");$(".icon.usetime",a).addClass("input-wrapper");$(".icon.usetime span i",a).remove();$(".icon.usetime span",a).on("focusout",function(){var a=$(this);var b=a.html();var c=window.style.duration.parse(b);if(""!==b&&0===c)return a.css("border-bottom-color","#FF404B");a.css("border-bottom-color","");return a.html(window.style.duration.string(c))});$(".icon.immunity",a).addClass("input-wrapper");$(".icon.name",a).addClass("input-wrapper");$(".icon span",a).addClass("input");
$(".icon span",a).forEach(function(a){return a.setAttribute("contenteditable","true")});window.api.storage[b]=h;window.api.servers("",h,d);break;case "ban":case "mutegag":$(".icon.reason",a).addClass("input-wrapper");$(".icon.reason span",a).addClass("input");$(".icon.reason span",a)[0].setAttribute("contenteditable","true");$(".icon.time",a).addClass("input-wrapper");b=1E3*parseInt($(".icon.time span",a)[0].getAttribute("data-timestamp"));b=new Date(b);b=window.style.utils.date.convert.to.iso(b);
d=window.style.utils.date.convert.to.iso(new Date);$(".icon.time",a).htmlAppend("<input type='datetime-local' min='"+d+"' value='"+b+"'>");$(".icon.time span",a).remove();$(".icon.modes div",a).addClass("action").forEach(function(a){return a.setAttribute("onclick","window.style.mutegag.toggle(this)")});$(".icon.modes div svg",a).forEach(function(a){a=$(a);a.hasClass("gray")&&a.removeClass("gray").addClass("red");if(a.hasClass("white"))return a.removeClass("white").addClass("gray")});break;case "server":a=
a.parentElement;b=$("input.uuid",a)[0].value;d=$(".icon.game",a);$("span",d[0]).remove();d.htmlAppend("<select id='server-"+b+"'></select>");h=new Choices("#server-"+b,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit big"}});window.api.games(h,d[0].getAttribute("data-value"));$(".icon.gamemode",a).addClass("input-wrapper big");$(".icon.gamemode span",a).addClass("input");$(".icon.gamemode span",a)[0].setAttribute("contenteditable","true");$(".icon.network",a).addClass("input-wrapper big");
$(".icon.network span",a).addClass("input");$(".icon.network span",a)[0].setAttribute("contenteditable","true");$(".icon.password",a).addClass("input-wrapper big");$(".icon.password",a).htmlAppend('<input type="password", placeholder="Password"></input>');$(".icon.password span",a).remove();window.api.storage[b]=h;break;case "setting__user":$(".column.animated",a).toggleClass("collapsed");b=$("input.uuid",a)[0].value;d=$(".column.groups",a);d.htmlAppend("<select id='user-group-"+b+"' multiple></select>");
h=new Choices("#user-group-"+b,{choices:[],duplicateItems:!1,paste:!1,searchEnabled:!1,searchChoices:!1,removeItemButton:!0,classNames:{containerOuter:"choices edit"}});window.api.groups("",h,$("span",d).html().split(", "));$("span",d).remove();window.style.settings.init(!0);window.api.storage[b]=h;break;case "setting__group":$(".column.animated",a).toggleClass("collapsed"),window.style.settings.init(!0)}$(c).css("opacity","0");setTimeout(function(){$(c).htmlAfter("<i class='save opacity animated' data-feather='save'></i>");
feather.replace();var a=c.parentElement.querySelector(".save.opacity.animated");$(c).remove();return setTimeout(function(){a.setAttribute("onclick",g);return $(a).css("opacity","1")},300)},300)}}}).call(this);
(function(){var f=function(b,a,g,e,d){return b[e](a,{},g,function(a,b){if(b.success)return d.reset()})};var b=function(b,a){b=void 0===b?"":b;var c={};var e={toast:!0};var d="put";var l=void 0;Array.from(a.elements).forEach(function(a){if(!$(a).hasClass("skip"))if($(a).hasClass("target"))l=a.value;else{if(a.hasAttribute("multiple"))return e=Array.from(a.options),c[a.name]=e.map(function(a){return a.value});if("checkbox"===a.getAttribute("type")){if(!a.checked)return;c.hasOwnProperty(a.name)||(c[a.name]=
[]);return c[a.name].push(a.value)}if(a.hasAttribute("data-list"))return c[a.name]=[a.value];if(a.value)return c[a.name]=a.value}});switch(b){case "admins[web][groups]":var h=window.endpoint.api.groups;break;case "admins[web][admins]":d="post";h=window.endpoint.api.users[l];break;case "admins[server][roles]":h=window.endpoint.api.roles;break;case "admins[server][admins]":d="post",h=window.endpoint.api.users[l]}a.hasAttribute("data-append")?h.get({},{},{},function(b,g){b=a.getAttribute("data-append");
c[b]=g.result[b].concat(c[b]);return f(h,e,c,d,a)}):f(h,e,c,d,a)};window.api.create=function(c,a,f){c=void 0===c?"":c;(void 0===f?0:f)?(a=window.batch,window.batch=[]):a=[a];a.forEach(function(a){return b(c,a)})}}).call(this);
