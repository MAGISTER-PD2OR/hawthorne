var l=l||{};l.scope={};l.ASSUME_ES5=!1;l.ASSUME_NO_NATIVE_MAP=!1;l.ASSUME_NO_NATIVE_SET=!1;l.defineProperty=l.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,b,c){d!=Array.prototype&&d!=Object.prototype&&(d[b]=c.value)};l.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};l.global=l.getGlobal(this);
l.polyfill=function(d,b){if(b){var c=l.global;d=d.split(".");for(var a=0;a<d.length-1;a++){var m=d[a];m in c||(c[m]={});c=c[m]}d=d[d.length-1];a=c[d];b=b(a);b!=a&&null!=b&&l.defineProperty(c,d,{configurable:!0,writable:!0,value:b})}};
l.polyfill("Array.from",function(d){return d?d:function(b,c,a){c=null!=c?c:function(a){return a};var d=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var e=0;!(f=b.next()).done;)d.push(c.call(a,f.value,e++))}else for(f=b.length,e=0;e<f;e++)d.push(c.call(a,b[e],e));return d}},"es6","es3");l.polyfill("Object.is",function(d){return d?d:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
l.polyfill("Array.prototype.includes",function(d){return d?d:function(b,c){var a=this;a instanceof String&&(a=String(a));var d=a.length;c=c||0;for(0>c&&(c=Math.max(c+d,0));c<d;c++){var f=a[c];if(f===b||Object.is(f,b))return!0}return!1}},"es7","es3");
l.checkStringArgs=function(d,b,c){if(null==d)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return d+""};l.polyfill("String.prototype.includes",function(d){return d?d:function(b,c){return-1!==l.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
(function(){var d=function(b,c){var a={};switch(void 0===b?"":b){case "punishment":var d=c.getAttribute("data-id");var f=c.getAttribute("data-user");f=window.endpoint.api.users[f].punishments[d];break;case "admins[server][admins]":d=c.getAttribute("data-id");f=c.getAttribute("data-user");f=window.endpoint.api.users[f];a={roles:[d],reset:!1};break;case "admins[server][roles]":d=c.getAttribute("data-id");f=window.endpoint.api.roles[d];break;case "admins[web][admins]":b=c.getAttribute("data-id");f=c.getAttribute("data-user");
f=window.endpoint.api.users[f];a={groups:[b],reset:!1};break;case "admins[web][groups]":b=c.getAttribute("data-id");f=window.endpoint.api.groups[b];break;case "servers[detailed]":d=c.getAttribute("data-id"),f=window.endpoint.api.servers[d]}return f.delete({},{},a,function(a,b){b.success&&(c.hasAttribute("data-opacity")&&(d=c.getAttribute("data-id"),a=$("[data-id='"+d+"']").css("opacity","0.5").removeClass("logSelected"),$(".checkboxDialogue",a).fadeOut("fast"),$(".checkmarkContainer",a).css("visibility",
"hidden")),c.hasAttribute("data-remove")&&$(c).remove(),c.hasAttribute("data-visibility")&&$(c).css("visibility","hidden"),c.hasAttribute("data-redirect")&&window.vc())})};window.api.remove=function(b,c,a){b=void 0===b?"":b;(void 0===a?0:a)?(c=window.batch,window.batch=[]):c=[c];c.forEach(function(a){return d(b,a)})}}).call(this);
(function(){var d=function(b,c){b=void 0===b?"":b;var a,d;var f={target:c,skip_animation:!1};var e=c.parentElement.parentElement.parentElement;switch(b){case "admin__administrator":f=$("input.role",e)[0].value;b=$("input.uuid",e)[0].value;var h=window.api.storage[b+"#"+f];e=h.getValue(!0);h=[a={promotion:!1,role:f},a={promotion:!0,role:e}];e=d=0;for(f=h.length;e<f;e++)a=h[e],window.endpoint.api.users[b].post(a,function(a,b){if(b.success)return d+=1});var k=$(c);2===d?k.addClass("explicit red"):k.addClass("explicit green");
setTimeout(function(){return k.removeClass("explicit green red")},1200);break;case "admin__groups":b=$("input.uuid",e)[0].value;var g={name:$(".name span",e).html(),server:window.api.storage[b].getValue(!0),immunity:parseInt($(".immunity span",e).html().match(/([0-9]|[1-8][0-9]|9[0-9]|100)(?:%)?$/)[1]),usetime:-1,flags:""};$(".immunity span",e).html(g.immunity+"%");"all"===g.server&&(g.server=null);$(".actions input:checked",e).forEach(function(a){return g.flags+=a.value});c=$(".usetime span",e).html();
if(!0===c||""!==c)g.usetime=window.style.duration.parse(c);window.endpoint.api.roles[b].post(f,{},g,function(){});break;case "mutegag":case "ban":var q=$("input.user",e)[0].value;var p=$("input.server",e)[0].value;var r=$("input.punishment",e)[0].value;h=parseInt($(".icon.time",e)[0].getAttribute("data-created"));c=$(".icon.time input",e)[0].value;""!==c?(c=new Date(c),c=c.getTime()/1E3):c=0;a={length:parseInt(c-h),reason:$(".icon.reason span",e).html()};""!==p&&(a.server=p);"ban"===b&&(a.banned=
!0);"mutegag"===b&&($(".icon.modes .red",e).forEach(function(b){return a.type+=b.getAttribute("data-type")}),a.muted=!1,a.gagged=!1,a.type.match(/mute/)&&a.type.match(/gag/)&&(a.muted=!0,a.gagged=!0),""===a.type&&(a.muted=!0,a.gagged=!0),type.match(/mute/)&&(a.muted=!0),type.match(/gag/)&&(a.gagged=!0));window.endpoint.api.users[q].punishments[r].post(f,{},a,function(){});break;case "server":e=e.parentElement;b=$("input.uuid",e)[0].value;h=window.api.storage[b];a={game:h.getValue(!0),gamemode:$(".icon.gamemode span",
e).html(),ip:$(".icon.network span",e).html().split(":")[0],port:parseInt($(".icon.network span",e).html().split(":")[1])};e=$(".icon.password input",e)[0].value;""!==e&&(a.password=e);window.endpoint.api.servers[b].post(f,{},a,function(){});break;case "setting__user":b=$("input.uuid",e)[0].value;h=window.api.storage[b];var n=[];$(".permission__child:checked",e).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)});a={permissions:n,groups:h.getValue(!0)};
window.endpoint.api.users[b].post(f,{},a,function(){});break;case "setting__group":b=$("input.uuid",e)[0].value,n=[],$(".permission__child:checked",e).forEach(function(a){a=a.id;a=a.replace(/\s/g,"");a=a.split("__");a=a[0]+"."+a[1];return n.push(a)}),a={permissions:n},window.endpoint.api.groups[b].post(f,{},a,function(){})}};window.api.edit=function(b,c){b=void 0===b?"":b;if(c.getAttribute("class").match(/save/))d(b,c);else{var a=c.parentElement.parentElement.parentElement;var m=c.getAttribute("onclick");
switch(b){case "admin__administrator":var f=a.querySelector(".icon.group");b=$("input.uuid",a)[0].value;var e=$("input.role",a)[0].value;var h=f.querySelector("span");$(h).remove();$(f).htmlAppend("<select id='group-"+(b+"---"+e)+"'></select>");var k=new Choices("#group-"+(b+"---"+e),{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit"}});k.passedElement.addEventListener("change",function(){h=$(".server span",a);var b=k.getValue().customProperties.server;return null===b?h.html("all"):
window.endpoint.api.servers[b].get(function(a,b){if(b.success)return h.html(b.result.name)})},!1);window.api.storage[b+"#"+e]=k;window.api.roles("",k,e);break;case "admin__groups":f=a.querySelector(".icon.server");b=$("input.uuid",a)[0].value;e=$("input.server",a)[0].value;""===e&&(e="all");h=f.querySelector("span");$(h).remove();$(f).htmlAppend("<select id='server-"+b+"'></select>");k=new Choices("#server-"+b,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit small"}});$(".icon.group .actions",
a).removeClass("disabled").addClass("enabled");$(".icon.usetime",a).addClass("input-wrapper");$(".icon.usetime span i",a).remove();$(".icon.usetime span",a).on("focusout",function(){var a=$(this);var b=a.html();var c=window.style.duration.parse(b);if(""!==b&&0===c)return a.css("border-bottom-color","#FF404B");a.css("border-bottom-color","");return a.html(window.style.duration.string(c))});$(".icon.immunity",a).addClass("input-wrapper");$(".icon.name",a).addClass("input-wrapper");$(".icon span",a).addClass("input");
$(".icon span",a).forEach(function(a){return a.setAttribute("contenteditable","true")});window.api.storage[b]=k;window.api.servers("",k,e);break;case "ban":case "mutegag":$(".icon.reason",a).addClass("input-wrapper");$(".icon.reason span",a).addClass("input");$(".icon.reason span",a)[0].setAttribute("contenteditable","true");$(".icon.time",a).addClass("input-wrapper");b=1E3*parseInt($(".icon.time span",a)[0].getAttribute("data-timestamp"));b=new Date(b);b=window.style.utils.date.convert.to.iso(b);
e=window.style.utils.date.convert.to.iso(new Date);$(".icon.time",a).htmlAppend("<input type='datetime-local' min='"+e+"' value='"+b+"'>");$(".icon.time span",a).remove();$(".icon.modes div",a).addClass("action").forEach(function(a){return a.setAttribute("onclick","window.style.mutegag.toggle(this)")});$(".icon.modes div svg",a).forEach(function(a){a=$(a);a.hasClass("gray")&&a.removeClass("gray").addClass("red");if(a.hasClass("white"))return a.removeClass("white").addClass("gray")});break;case "server":a=
a.parentElement;b=$("input.uuid",a)[0].value;e=$(".icon.game",a);$("span",e[0]).remove();e.htmlAppend("<select id='server-"+b+"'></select>");k=new Choices("#server-"+b,{searchEnabled:!1,choices:[],classNames:{containerOuter:"choices edit big"}});window.api.games(k,e[0].getAttribute("data-value"));$(".icon.gamemode",a).addClass("input-wrapper big");$(".icon.gamemode span",a).addClass("input");$(".icon.gamemode span",a)[0].setAttribute("contenteditable","true");$(".icon.network",a).addClass("input-wrapper big");
$(".icon.network span",a).addClass("input");$(".icon.network span",a)[0].setAttribute("contenteditable","true");$(".icon.password",a).addClass("input-wrapper big");$(".icon.password",a).htmlAppend('<input type="password", placeholder="Password"></input>');$(".icon.password span",a).remove();window.api.storage[b]=k;break;case "setting__user":$(".column.animated",a).toggleClass("collapsed");b=$("input.uuid",a)[0].value;e=$(".column.groups",a);e.htmlAppend("<select id='user-group-"+b+"' multiple></select>");
k=new Choices("#user-group-"+b,{choices:[],duplicateItems:!1,paste:!1,searchEnabled:!1,searchChoices:!1,removeItemButton:!0,classNames:{containerOuter:"choices edit"}});window.api.groups("",k,$("span",e).html().split(", "));$("span",e).remove();window.style.settings.init(!0);window.api.storage[b]=k;break;case "setting__group":$(".column.animated",a).toggleClass("collapsed"),window.style.settings.init(!0)}$(c).css("opacity","0");setTimeout(function(){$(c).htmlAfter("<i class='save opacity animated' data-feather='save'></i>");
feather.replace();var a=c.parentElement.querySelector(".save.opacity.animated");$(c).remove();return setTimeout(function(){a.setAttribute("onclick",m);return $(a).css("opacity","1")},300)},300)}}}).call(this);
(function(){var d=function(b,a,d,f,e){return b[f](a,{},d,function(a,b){if(b.success)return e.reset()})};var b=function(b,a){b=void 0===b?"":b;var c={};var f={toast:!0};var e="put";var h=void 0;var k=!0;Array.from(a.elements).forEach(function(a){var b,d;if(!$(a).hasClass("skip")){var e=window.api.utils.transform(a);var g=window.api.utils.validation(a);if(g[0])if($(a).hasClass("target"))h=e;else{g=a.name;a.hasAttribute("data-name")&&(g=a.getAttribute("data-name"));if(a.hasAttribute("multiple"))return f=
Array.from(a.options),c[g]=f.map(function(a){return a.value});if(a.hasAttribute("data-boolean"))return c[a.getAttribute("data-boolean")]=a.checked;if("checkbox"===a.getAttribute("type")){if(!a.checked)return;c.hasOwnProperty(a.name)||(c[g]=[]);return c[g].push(e)}if(a.hasAttribute("data-list"))return c[g]=[e];if(g.includes("/")&&"Array"===e.constructor.name){a=[];var m=g.split("/");g=b=0;for(d=m.length;b<=d;g=b+=1)a.push([m[g],e[g]]);return a.forEach(function(a){return c[a[0]]=a[1]})}if(e)return c[g]=
e}else k=!1,$(a).addClass("invalid"),console.log(g),$("span span.invalid",$(a).parent())[0].innerHTML=g[1]}});if(k){switch(b){case "admins[web][groups]":var g=window.endpoint.api.groups;break;case "admins[web][admins]":e="post";g=window.endpoint.api.users[h];break;case "admins[server][roles]":g=window.endpoint.api.roles;break;case "admins[server][admins]":e="post";g=window.endpoint.api.users[h];break;case "players[detailed][punishment]":g=window.endpoint.api.users[h].punishments;break;case "servers":g=
window.endpoint.api.servers}a.hasAttribute("data-append")?g.get({},{},{},function(b,h){b=a.getAttribute("data-append");c[b]=h.result[b].concat(c[b]);return d(g,f,c,e,a)}):d(g,f,c,e,a)}};window.api.create=function(c,a,d){c=void 0===c?"":c;(void 0===d?0:d)?(a=window.batch,window.batch=[]):a=[a];a.forEach(function(a){return b(c,a)})}}).call(this);
window.api.utils={validation:function(d){var b=!0;var c="";if(!d.value)return[b,c];if(d.hasAttribute("data-link")){var a=d.getAttribute("data-link");var m=$(d).parent("form");c="Only one field can be filled.";$("[data-link="+a+"]",m).not([d]).forEach(function(a){if(a.value)return b=!1})}b||window.style.toast("error","Invalid value detected!");return[b,c]},transform:function(d){if(!d.hasAttribute("data-transform"))return d.value;var b=d.getAttribute("data-transform");return"iso-duration"===b?(d=new Duration(d.value),
d.seconds):"ip-port"===b?d.value.split(":").splice(0,2):"flatpickr"===b?(b=$(d).parent(".flatpickr")[0]._flatpickr.selectedDates[0].getTime(),d=new Date/1E3>>0,(b/1E3>>0)-d):"lower"===b?d.value.toLowerCase():d.value}};
