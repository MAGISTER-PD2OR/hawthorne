var f=f||{};f.scope={};f.ASSUME_ES5=!1;f.ASSUME_NO_NATIVE_MAP=!1;f.ASSUME_NO_NATIVE_SET=!1;f.defineProperty=f.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,e){b!=Array.prototype&&b!=Object.prototype&&(b[a]=e.value)};f.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};f.global=f.getGlobal(this);
f.polyfill=function(b,a){if(a){var e=f.global;b=b.split(".");for(var c=0;c<b.length-1;c++){var d=b[c];d in e||(e[d]={});e=e[d]}b=b[b.length-1];c=e[b];a=a(c);a!=c&&null!=a&&f.defineProperty(e,b,{configurable:!0,writable:!0,value:a})}};f.polyfill("Object.is",function(b){return b?b:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
f.polyfill("Array.prototype.includes",function(b){return b?b:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var e=c[b];if(e===a||Object.is(e,a))return!0}return!1}},"es7","es3");
f.checkStringArgs=function(b,a,e){if(null==b)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return b+""};f.polyfill("String.prototype.includes",function(b){return b?b:function(a,b){return-1!==f.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");f.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};
f.polyfill("Object.entries",function(b){return b?b:function(a){var b=[],c;for(c in a)f.owns(a,c)&&b.push([c,a[c]]);return b}},"es8","es3");f.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};f.arrayIterator=function(b){return{next:f.arrayIteratorImpl(b)}};f.SYMBOL_PREFIX="jscomp_symbol_";f.initSymbol=function(){f.initSymbol=function(){};f.global.Symbol||(f.global.Symbol=f.Symbol)};
f.Symbol=function(){var b=0;return function(a){return f.SYMBOL_PREFIX+(a||"")+b++}}();f.initSymbolIterator=function(){f.initSymbol();var b=f.global.Symbol.iterator;b||(b=f.global.Symbol.iterator=f.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&f.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return f.iteratorPrototype(f.arrayIteratorImpl(this))}});f.initSymbolIterator=function(){}};
f.initSymbolAsyncIterator=function(){f.initSymbol();var b=f.global.Symbol.asyncIterator;b||(b=f.global.Symbol.asyncIterator=f.global.Symbol("asyncIterator"));f.initSymbolAsyncIterator=function(){}};f.iteratorPrototype=function(b){f.initSymbolIterator();b={next:b};b[f.global.Symbol.iterator]=function(){return this};return b};
f.iteratorFromArray=function(b,a){f.initSymbolIterator();b instanceof String&&(b+="");var e=0,c={next:function(){if(e<b.length){var d=e++;return{value:a(d,b[d]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};f.polyfill("Array.prototype.keys",function(b){return b?b:function(){return f.iteratorFromArray(this,function(a){return a})}},"es6","es3");
fermata.registerPlugin("hawpi",function(b,a){this.base=a;return function(a,c){a.headers.Accept="application/json";a.headers["Content-Type"]="application/json";a.data=JSON.stringify(a.data);return b(a,function(d,b){if(!d){!1===b.status.toFixed()[0]&&(d=Error("Bad status code from server: "+b.status));try{b=JSON.parse(b.data)}catch(k){d=k}}a.options.toast&&(d?window.style.toast("error",d):b.success?window.style.toast("success","Successfully applied changes!"):window.style.toast("error",b.reason));c(d,
b)})}});
(function(){var b=[].indexOf;var a=function(c,a,b){return b.forEach(function(b){var d,e;var h=c.includes("<td")?document.createElement("tbody"):document.createElement("div");h.innerHTML=c;for(d=[];null!==(e=h.lastChild);)try{"before"===a?d.push(b.parentNode.insertBefore(e,b)):"after"===a?d.push(b.parentNode.insertBefore(e,b.nextSibling)):"append"===a?d.push(b.appendChild(e)):"prepend"===a?d.push(b.insertBefore(e,b.firstChild)):d.push(void 0)}catch(m){break}return d})};$.fn.hasClass=function(c){return!!this[0]&&this[0].classList.contains(c)};
$.fn.addClass=function(c){this.forEach(function(a){a=a.classList;return a.add.apply(a,c.split(/\s/))});return this};$.fn.removeClass=function(a){this.forEach(function(c){c=c.classList;return c.remove.apply(c,a.split(/\s/))});return this};$.fn.toggleClass=function(a,b){this.forEach(function(c){c=c.classList;"boolean"!==typeof b&&(b=!c.contains(a));c[b?"add":"remove"].apply(c,a.split(/\s/))});return this};$.fn.css=function(a,b){b=void 0===b?null:b;null===b?console.log("this is not yet implemented"):
this.forEach(function(c){try{return c.style[a]=b}catch(k){return console.error('Could not set css style property "'+a+'".')}});return this};$.fn.remove=function(){this.forEach(function(a){return a.parentNode.removeChild(a)});return this};$.fn.val=function(a){a=void 0===a?"":a;if(""!==a)this.forEach(function(b){return b.value=a});else if(this[0])return this[0].value;return this};$.fn.html=function(a){a=void 0===a?null:a;null!==a&&this.forEach(function(b){return b.innerHTML=a});return this[0]?this[0].innerHTML:
this};$.fn.htmlBefore=function(b){a(b,"before",this);return this};$.fn.htmlAfter=function(b){a(b,"after",this);return this};$.fn.htmlAppend=function(b){a(b,"append",this);return this};$.fn.htmlPrepend=function(b){a(b,"prepend",this);return this};$.fn.fadeIn=function(a,b){b=void 0===b?"block":b;this.forEach(function(a){a.style.display=b;a.style.opacity="0";a.style.transition="0.2s opacity ease";return setTimeout(function(){return a.style.opacity=null},10)});return this};$.fn.fadeOut=function(){this.forEach(function(a){a.style.transition=
"0.2s opacity ease";a.style.opacity="0";return setTimeout(function(){return a.style.display="none"},200)});return this};$.fn.fadeToggle=function(a,b){b=void 0===b?"block":b;this.forEach(function(a){a.style.transition="0.2s opacity ease";if("none"===window.getComputedStyle(a).display)return a.style.display=b,setTimeout(function(){return a.style.opacity=null},10);a.style.opacity="0";return setTimeout(function(){return a.style.display="none"},200)});return this};$.fn.not=function(a){return $(this.filter(function(c){return 0>
b.call(a,c)}))};$.fn.parent=function(a){var b;if(void 0===a)return $(this[0].parentElement);for(b=this[0].parentElement;!b.matches(a);)b=b.parentElement;return $(b)};var e=function(a){var b=window.getComputedStyle(a);var c=b.display;var e=b.position;var n=b.visibility;b=b.maxHeight.replace("px","").replace("%","");if("none"!==c&&"0"!==b)return a.offsetHeight;a.style.position="absolute";a.style.visibility="hidden";a.style.display="block";b=a.offsetHeight;a.style.display=c;a.style.position=e;a.style.visibility=
n;return b};$.fn.slideToggle=function(){this.forEach(function(a){var b=0;if(a.getAttribute("data-max-height"))return setTimeout(function(){"0"===a.style.maxHeight.replace("px","").replace("%","")?(a.style.display="block",setTimeout(function(){return a.style.maxHeight=a.getAttribute("data-max-height")},10)):(a.style.maxHeight="0",setTimeout(function(){return a.style.display="none"},500))},10);b=e(a)+"px";a.style.transition="max-height 0.5s ease-in-out";a.style.overflowY="hidden";a.setAttribute("data-max-height",
b);a.style.display="block";a.style.maxHeight="0";return setTimeout(function(){a.style.maxHeight=b},10)});return this};$.fn.slideUp=function(){if(0!==this.length){var a=window.getComputedStyle(this[0]);if("none"!==a.display)return this[0].getAttribute("data-max-height")||(this[0].style.overflowY="hidden",this[0].style.maxHeight=a.height,this[0].style.transition="max-height 0.5s ease-in-out",this[0].setAttribute("data-max-height",a.height)),this.slideToggle()}};$.fn.slideDown=function(){if(0!==this.length&&
"none"===window.getComputedStyle(this[0]).display)return this.slideToggle()};$.fn.animate=function(a,b){var c;var e="";var d=Object.entries(a);var l=0;for(c=d.length;l<c;l++){var g=d[l];g[0]="width"===g[0]?"max-width":g[0];e+=g[0]+" "}e+=b/1E3+"s ease";var m=0;this.forEach(function(b){b.style.transition=e;if(Object.keys(a).includes("width"))return m=parseInt(b.style["max-width"]),b.style["max-width"]=window.getComputedStyle(b).width});var p=this;setTimeout(function(){return p.forEach(function(c){var e;
var d=Object.entries(a);var h=[];var k=0;for(e=d.length;k<e;k++)g=d[k],"width"===g[0]?(c.style["max-width"]=g[1],parseInt(g[1])<m?h.push(setTimeout(function(){return c.style[g[0]]=g[1]},b)):h.push(c.style[g[0]]=g[1])):h.push(c.style[g[0]]=g[1]);return h})},10);return this}}).call(this);
(function(){var b=function(a,b,c){a=parseInt(a);b=parseInt(b);c=parseInt(c);null==a&&(a=0);null==b&&(b=0);null==c&&(c=0);return 86400*a+3600*b+60*c};window.style.duration={parse:function(a){var e,c;if(null===a||""===a)return 0;var d=new RegExp(/([0-9][0-9]?)[ ]?m(?:[^o]|$)/);var h=new RegExp(/([0-9][0-9]?)[ ]?h/);var k=new RegExp(/([0-9]{1,2})[ ]?d/);var n=new RegExp(/([0-9][0-9]?)[ ]?w/);var l=new RegExp(/([0-9][0-9]?)[ ]?mo/);var g=new RegExp(/([0-9][0-9]?)[ ]?y/);var m=c=e=0;l.test(a)&&(e+=31*
l.exec(a)[1]);d.test(a)&&(m=d.exec(a)[1]);h.test(a)&&(c=h.exec(a)[1]);k.test(a)&&(e+=k.exec(a)[1]);n.test(a)&&(e+=7*n.exec(a)[1]);g.test(a)&&(e+=365*g.exec(a)[1]);return b(e,c,m)},string:function(a){if(0>=a)return"";var b=Math.floor(a/60%60);var c=Math.floor(a/3600%24);a=Math.floor(a/86400);var d="";0<a&&(d=d+a+"d ");0<c&&(d=d+c+"h ");0<b&&(d=d+b+"m ");return d.substring(0,d.length-1)}};window.style.getOrCreate("utils").date={convert:{to:{iso:function(a){var b=a.getFullYear();var c=1===a.getMonth().toString().length?
"0"+(a.getMonth()+1).toString():a.getMonth()+1;var d=1===a.getDate().toString().length?"0"+a.getDate().toString():a.getDate();var h=1===a.getHours().toString().length?"0"+a.getHours().toString():a.getHours();a=1===a.getMinutes().toString().length?"0"+a.getMinutes().toString():a.getMinutes();return b+"-"+c+"-"+d+"T"+h+":"+a}}}}}).call(this);
window.style.charts={heatmap:function(b,a){var e=new Date;var c=new Date(e.getTime()-31536E6);new frappe.Chart(b,{type:"heatmap",data:{dataPoints:a,start:c,end:e},colors:["#eaf8ff","#aae2ff","#6acdff","#2bb7ff","#00a9ff"]});var d=function(a){var b=$(a);a=$(".frappe-chart",b)[0].getAttribute("height");var c=$(".frappe-chart",b)[0].getAttribute("width");return $(".frappe-chart",b)[0].setAttribute("viewBox","0 0 "+c+" "+a)};d(b);a=new MutationObserver(function(a){return a.forEach(function(a){if(0<a.addedNodes.length)return d(b)})});
c=$(b);a.observe($(".chart-container",c)[0],{childList:!0})},line:function(b,a,e,c,d){d=void 0===d?" ":d;new frappe.Chart(b,{type:"line",data:{labels:a,datasets:[{values:e}]},colors:["#00a9ff"],height:void 0===c?400:c,tooltipOptions:{formatTooltipY:function(a){return a+d}},lineOptions:{heatline:1,regionFill:1}})},card:function(b,a,e,c,d){d=void 0===d?" clients":d;new frappe.Chart(b,{type:"line",data:{labels:a,datasets:[{values:e}]},colors:["#00a9ff"],height:void 0===c?80:c,tooltipOptions:{formatTooltipY:function(a){return a+
d}},lineOptions:{hideDots:1}});$(b).addClass("minimal")}};window.style.copy=function(b){var a=document.createElement("textarea");a.style.position="fixed";a.style.top=0;a.style.left=0;a.style.width="2em";a.style.height="2em";a.style.padding=0;a.style.border="none";a.style.outline="none";a.style.boxShadow="none";a.style.background="transparent";a.value=b;document.body.appendChild(a);a.focus();a.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(a)};
window.style.rcon=function(b){var a=$(b.parentElement);var e=$(".hidden",a)[0].value;var c=[];a[0].childNodes.forEach(function(a){if("#text"===a.nodeName||"BR"===a.nodeName)return c.push(a)});c.forEach(function(b){return a[0].removeChild(b)});b={command:$(".command",a)[0].value};window.endpoint.api.servers[e].execute.put({},{},b,function(b,c){var d=c.result.response.split("\n");d.forEach(function(a,b){return d[b]="> "+a});d=d.join("<br />");return a.htmlPrepend(d)})};
window.style.login=function(b){return 0!==b.target.value.length?$(".transition").slideDown():$(".transition").slideUp()};window.style.toast=function(b,a){var e=$(".toast");e.addClass(b);$(".desc",".toast")[0].innerHTML=a;e.addClass("show");setTimeout(function(){e.removeClass(b);return e.removeClass("show")},5E3)};window.endpoint={api:fermata.hawpi("/api/v1"),ajax:fermata.raw({base:window.location.origin+"/ajax/v1"}),bare:fermata.raw({base:window.location.origin})};
